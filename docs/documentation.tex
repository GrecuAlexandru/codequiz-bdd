\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{helvet}
\usepackage{titlesec}
\usepackage{indentfirst}
\usepackage{array}
\usepackage{booktabs}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{float}

% Font and Formatting settings
\renewcommand{\familydefault}{\sfdefault}
\setlength{\parindent}{1.27cm}
\setlength{\parskip}{0pt}
\linespread{1.0}

% Code listing style
\lstset{
    basicstyle=\ttfamily\small,
    breaklines=true,
    frame=single,
    backgroundcolor=\color{gray!10},
    keywordstyle=\color{blue},
    commentstyle=\color{green!50!black},
    stringstyle=\color{red!50!black}
}

% Title formatting
\titleformat{\section}{\normalfont\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{}

\begin{document}

% Custom Header / Title Block
\begin{center}
    {\Large \textbf{CodeQuiz}} \\[0.4cm]
    Alexandru Grecu 342C3\\[0.1cm]
\end{center}
\vspace{0.3cm}

% Content starts immediately
\section{Descrierea temei}

Aplicatia \textbf{CodeQuiz} este o platforma web interactiva destinata testarii cunostintelor de programare si concepte tehnice IT. Scopul principal este de a oferi utilizatorilor un mediu structurat pentru a raspunde la chestionare (quiz-uri) urmarind imbunatatirea cunostintelor, a-si urmari progresul si a contribui cu continut nou.

Utilizatorii pot parcurge teste pe diverse topicuri tehnice precum Sisteme de Operare, Arhitectura Software, Baze de Date, Algoritmi si Dezvoltare Web. Platforma ofera feedback imediat dupa finalizarea fiecarui quiz, afisand scorul obtinut si permitand review-ul raspunsurilor date.

Functionalitatile principale includ:
\begin{itemize}
    \item Autentificare si inregistrare utilizatori
    \item Parcurgerea quiz-urilor cu intrebari cu raspuns multiplu
    \item Vizualizarea istoricului si progresului personal
    \item Contribuirea cu intrebari noi (supuse aprobarii administratorului)
    \item Oferirea de review-uri pentru intrebari
    \item Panou de administrare cu rapoarte grafice si statistici
\end{itemize}

\section{Descrierea bazei de date}

\subsection{Diagrama bazei de date}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{dbdiagram.png}
    \caption{Diagrama Bazei de Date}
\end{figure}

\vspace{2cm}

\subsection{Structura tabelelor}

Baza de date este compusa din \textbf{10 tabele} principale:

\begin{table}[h!]
\centering
\small
\begin{tabular}{|l|l|p{6cm}|}
\hline
\textbf{Tabel} & \textbf{Descriere} & \textbf{Coloane principale} \\
\hline
Users & Utilizatorii platformei & ID, Username, PasswordHash, Email, Role, CreatedAt \\
\hline
Companies & Companiile asociate intrebarilor & ID, Name, Description \\
\hline
Topics & Subiectele testelor & ID, Name, Description \\
\hline
Quizzes & Quiz-urile disponibile & ID, Title, Description, CreatedAt \\
\hline
Questions & Intrebarile din quiz-uri & ID, QuizID, Text, Difficulty, CompanyID, TopicID \\
\hline
Answers & Variantele de raspuns & ID, QuestionID, Text, IsCorrect \\
\hline
QuizAttempts & Sesiunile de testare & ID, UserID, QuizID, Score, StartedAt, CompletedAt \\
\hline
UserProgress & Raspunsurile date & ID, AttemptID, QuestionID, SelectedAnswerID, IsCorrect \\
\hline
Reviews & Feedback utilizatori & ID, UserID, QuestionID, Rating, Comment, Date \\
\hline
Contributions & Intrebari propuse & ID, UserID, QuestionText, CorrectAnswer, Status \\
\hline
\end{tabular}
\caption{Structura tabelelor din baza de date}
\end{table}

\subsection{Descrierea constrangerilor de integritate}

\textbf{Chei Primare (PK):} Fiecare tabel are coloana ID de tip INT IDENTITY(1,1) PRIMARY KEY.

\textbf{Chei Externe (FK):}
\begin{itemize}
    \item Questions.QuizID $\rightarrow$ Quizzes.ID
    \item Questions.CompanyID $\rightarrow$ Companies.ID
    \item Questions.TopicID $\rightarrow$ Topics.ID
    \item Answers.QuestionID $\rightarrow$ Questions.ID (ON DELETE CASCADE)
    \item QuizAttempts.UserID $\rightarrow$ Users.ID
    \item QuizAttempts.QuizID $\rightarrow$ Quizzes.ID
    \item UserProgress.AttemptID $\rightarrow$ QuizAttempts.ID (ON DELETE CASCADE)
    \item Reviews.UserID $\rightarrow$ Users.ID
    \item Contributions.UserID $\rightarrow$ Users.ID
\end{itemize}

\textbf{Constrangeri CHECK:}
\begin{itemize}
    \item Users.Role IN ('User', 'Admin')
    \item Questions.Difficulty IN ('Easy', 'Medium', 'Hard')
    \item Reviews.Rating $>=$ 1 AND Rating $<=$ 5
    \item Contributions.Status IN ('Pending', 'Approved', 'Rejected')
\end{itemize}

\textbf{Unicitate:} Users.Username si Users.Email sunt UNIQUE.

\subsection{Descrierea procedurilor si functiilor}

Aplicatia utilizeaza exclusiv \textbf{proceduri stocate} pentru toate operatiunile cu baza de date:

\textbf{Gestionare Utilizatori:} \texttt{RegisterUser}, \texttt{LoginUser}, \texttt{GetUserByID}

\textbf{Flux Quiz:} \texttt{GetQuizzes}, \texttt{GetQuestionsByQuiz}, \texttt{GetAnswersByQuestion}, \texttt{StartQuizAttempt}, \texttt{RecordAttempt}, \texttt{CompleteQuizAttempt}, \texttt{GetQuizHistory}, \texttt{GetPendingQuizzes}, \texttt{GetQuizAttemptDetails}

\textbf{Rapoarte Admin (Complexitate 4-7):}
\begin{itemize}
    \item \texttt{GetCompanyStats} (Complexitate 4) - Top companii dupa rata de esec
    \item \texttt{GetTopicStats} (Complexitate 6) - Rata de succes pe topicuri
    \item \texttt{GetUserLeaderboard} (Complexitate 7) - Clasament utilizatori dupa engagement
    \item \texttt{GetTopicDifficultyAnalysis} (Complexitate 7) - Analiza succes pe dificultate
\end{itemize}

\textbf{Contributii si Review-uri:} \texttt{AddContribution}, \texttt{GetPendingContributions}, \texttt{ApproveContribution} (foloseste TRANSACTION), \texttt{RejectContribution}, \texttt{AddReview}, \texttt{GetAllReviews}

\section{Descrierea aplicatiei}

\subsection{Structura claselor}

Aplicatia este dezvoltata in \textbf{Python} cu \textbf{Flask}. Clasa principala \texttt{MSSQLConnection} gestioneaza conexiunea la baza de date prin metodele \texttt{openConnection()}, \texttt{closeConnection()} si \texttt{execute\_query()}. Modulul \texttt{app.py} defineste decoratorii \texttt{@login\_required} si \texttt{@admin\_required}, functia \texttt{create\_plot()} pentru grafice, si 19 route-uri Flask pentru functionalitatile aplicatiei.

\subsection{Diagrama de clase}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{classdiagram.png}
    \caption{Diagrama de Clase}
\end{figure}

\subsection{Diagrama de stari si fluxul de lucru}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth]{FlowChart.png}
    \caption{Fluxul de Lucru General}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.95\textwidth, height=1.0\textheight, keepaspectratio]{DiagramaStari.png}
\end{figure}

\subsection{Prezentarea modului in care se face conexiunea cu baza de date}

Conexiunea se realizeaza folosind driver-ul \textbf{ODBC pentru SQL Server} prin biblioteca pyodbc.

\textbf{String de conexiune:}
\begin{lstlisting}
conn_str = (
    "DRIVER={SQL Server};"
    "SERVER=localhost,1433;"
    "DATABASE=master;"
    "UID=SA;"
    "PWD=password;"
    "TrustServerCertificate=yes;"
)
\end{lstlisting}

\textbf{Modelul de utilizare (Open-Execute-Close):}
\begin{lstlisting}
db = get_db()
db.execute_query("EXEC NumeProcedura ?", (param1,))
result = db.cursor.fetchall()
db.closeConnection()
\end{lstlisting}

\subsection{Capturi de ecran pentru interfete si rapoarte}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{login.png}
    \caption{Login Screen}
\end{figure}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{dashboardquizzes.png}
    \caption{Dashboard Quizzes}
\end{figure}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{quiz.png}
    \caption{Quiz Question}
\end{figure}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{quizresult.png}
    \caption{Quiz Result}
\end{figure}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{contribution.png}
    \caption{Contribute Page}
\end{figure}

\begin{figure}[H]
    \centering
    \setlength{\abovecaptionskip}{3pt}
    \includegraphics[width=0.85\textwidth]{admindashboard.png}
    \caption{Admin Dashboard}
\end{figure}

\section{Concluzii}

Proiectul CodeQuiz a permis consolidarea cunostintelor de baze de date relationale si dezvoltare web. Principalele realizari:

\begin{itemize}
    \item Implementarea unei baze de date normalizate cu 10 tabele si relatii complexe
    \item Utilizarea exclusiva a procedurilor stocate pentru acces la date
    \item Generarea de grafice server-side folosind matplotlib
    \item Implementarea unui sistem de contributii cu flux de aprobare
    \item Securizarea aplicatiei prin hash-uri de parole si decoratori de autorizare
\end{itemize}

\section{Bibliografie}

\begin{enumerate}\small
    \item Documentatie Flask: \url{https://flask.palletsprojects.com/en/stable/}
    \item Laboratorul 07 - SQL Server : Interogari, Variabile si XML: \url{Laboratorul 07 - SQL Server : Interogari, Variabile si XML}
    \item Laboratorul 08 - SQLServer: DML, Cursori si Programabilitate: \url{https://ocw.cs.pub.ro/courses/bdd/laboratoare/08}
    \item Laboratorul 09 - Conectare la o Baza de Date: \url{https://ocw.cs.pub.ro/courses/bdd/laboratoare/09}
    \item Matplotlib User Guide: \url{https://matplotlib.org/stable/users/index.html}
    \item Tailwind CSS Documentation: \url{https://tailwindcss.com/docs}
    \item Flowbite - Tailwind CSS component library: \url{https://flowbite.com/docs/getting-started/introduction/}
\end{enumerate}

\end{document}
